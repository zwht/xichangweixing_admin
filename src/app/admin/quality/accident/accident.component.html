<div class="box">
  <div class="list-box">
    <div class="search clear" style="padding:20px;">
      <div>
        <div class="chaxun">
          <span>标题</span>
          <input nz-input [(ngModel)]="name" placeholder="查询标题" >
        </div>
        <div class="chaxun">
          <span>供应商</span>
          <nz-select style="width: 120px;" [(ngModel)]="supplierId" nzAllowClear nzPlaceHolder="状态">
            <nz-option *ngFor="let item of supplierList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </div>
        <div class="chaxun">
          <span>事件级别</span>
          <nz-select style="width: 120px;" [(ngModel)]="eventLevel" nzAllowClear nzPlaceHolder="事件级别">
            <nz-option [nzValue]="1" nzLabel="质量问题"></nz-option>
            <nz-option [nzValue]="2" nzLabel="质量事件"></nz-option>
            <nz-option [nzValue]="3" nzLabel="质量事故"></nz-option>
          </nz-select>
        </div>
        <div class="chaxun">
          <span>更新时间</span>
          <nz-date-picker  [nzFormat]="'yyyy/MM/dd'" [(ngModel)]="dateRange" (ngModelChange)="onChange($event)" ></nz-date-picker>
        </div>
        <div class="chaxun">
          <span>状态</span>
          <nz-select style="width: 120px;" [(ngModel)]="status" nzAllowClear nzPlaceHolder="状态">
            <nz-option [nzValue]="1" nzLabel="已发布"></nz-option>
            <nz-option [nzValue]="0" nzLabel="未发布"></nz-option>
          </nz-select>
        </div>
        <div class="chaxun">
          <button nz-button nzType="chaxun" (click)="getList()">查询</button>
        </div>
      </div>
    </div>
    <div class="table-head">
      <div class="head-h2">
        <span>要闻列表</span>
      </div>
      <div class="btn-box">
        <button nz-button nzType="danger" (click)="batchDelete()" >批量删除</button>
        <button nz-button nzType="tianjia" routerLink="./add">新增质量事件</button>
      </div>
    </div>
    <div class="table-box">
      <nz-table #basicTable 
        [nzData]="list" [nzFrontPagination]="false"
        [(nzPageIndex)]="pageNum"
        [nzTotal]="totalCount"
        [(nzPageSize)]="pageSize"
        (nzPageIndexChange)="getList()">
        <!-- <nz-table #basicTable [nzData]="list" [nzShowPagination]="false"> -->
        <thead>
          <tr>
            <th nzShowCheckbox [(nzChecked)]="allCk"  (nzCheckedChange)="allChecked($event)"></th>
            <th>序号</th>
            <th>标题</th>
            <th>更新时间</th>
            <th>操作人</th>
            <th>状态</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of list let i= index">
            <td nzShowCheckbox [(nzChecked)]="data.checked" ></td>
            <td>{{i}}</td>
            <td>{{data.name}}</td>
            <td>{{data.updateTime}}</td>
            <td>{{data.updateUser}}</td>
            <td>{{data.status==1?'已发布':'未发布'}}</td>
            <td>
              <a class="op" [routerLink]="'./edit/'+data.id">查看</a>
              <a class="op" *ngIf="data.status==1"  (click)="line(data)">下线</a>
              <a class="op" *ngIf="data.status==1" (click)="top(data)">置顶</a>
              <a class="op" *ngIf="data.status==0"  (click)="push(data)">发布</a>
              <a class="op" *ngIf="data.status==0" (click)="delete(data)">删除</a>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>
